The critical line in the code is:
[Python code: Use subprocess.Popen to call FFmpeg]

Here, you can perform Remote Code Execution (RCE) with the file name. The idea is to grep the flag from the main.py file and write it on the image to which the GIF is going to be converted. This can be done with the -vf drawtext=... option. The payload used is:
[Payload: Include grep and drawtext options in the file name]

When you upload a GIF with this payload as the file name, you will receive a resulting PNG with the flag written on it.
