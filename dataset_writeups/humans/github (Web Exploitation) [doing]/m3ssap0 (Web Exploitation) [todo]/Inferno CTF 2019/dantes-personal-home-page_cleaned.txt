The website will show its own source code.

There are a couple of checks that must be bypassed to get the flag.

The first part is the following.

[PHP code that checks if the "magic" parameter has been passed through the GET method. It then decodes the query string and uses a regular expression to check if it contains either an underscore or a space. If so, it terminates the script with the message "Get yourself some coffee".]

This check is pretty weird, because to bypass it you have to provide a GET parameter with underscores, but having a query string without underscores. So, yeah, there is a bit of magic, here...

PHP performs some string manipulation on input parameters' names in order to remove, for example, whitespaces and to convert characters in underscores.

This behavior can be abused crafting a string with chars that are converted to underscores, but they are not.

You can write a simple script to enumerate these chars.

You can use the `.` char to craft the URL.

The website will answer the following with a useless string.

At this point, the other check to bypass is the following.

[PHP code that checks whether a string variable named "magic" contains only alphanumeric characters or if it contains the substring "$dark$". If the latter is true and "magic" is not an array, it prints out a message containing the value of a variable named "flag".]

So you can insert only alphanumeric chars, but you have to insert two `$` chars.

Regex bypass using POISON NULL BYTE is pergformed. The result is a string that is correctly interpreted by `strpos` and, obviously, is not an array.

The final URL will print the flag.